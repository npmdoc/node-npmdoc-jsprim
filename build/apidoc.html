<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

    >jsprim (v1.4.0)</a>
</h1>
<h4>utilities for primitive JavaScript types</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.jsprim">module jsprim</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.deepCopy">
            function <span class="apidocSignatureSpan">jsprim.</span>deepCopy
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.deepEqual">
            function <span class="apidocSignatureSpan">jsprim.</span>deepEqual
            <span class="apidocSignatureSpan">(obj1, obj2)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.endsWith">
            function <span class="apidocSignatureSpan">jsprim.</span>endsWith
            <span class="apidocSignatureSpan">(str, suffix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.extraProperties">
            function <span class="apidocSignatureSpan">jsprim.</span>extraProperties
            <span class="apidocSignatureSpan">(obj, allowed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.flattenIter">
            function <span class="apidocSignatureSpan">jsprim.</span>flattenIter
            <span class="apidocSignatureSpan">(data, depth, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.flattenObject">
            function <span class="apidocSignatureSpan">jsprim.</span>flattenObject
            <span class="apidocSignatureSpan">(data, depth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.forEachKey">
            function <span class="apidocSignatureSpan">jsprim.</span>forEachKey
            <span class="apidocSignatureSpan">(obj, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hasKey">
            function <span class="apidocSignatureSpan">jsprim.</span>hasKey
            <span class="apidocSignatureSpan">(obj, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hrtimeAccum">
            function <span class="apidocSignatureSpan">jsprim.</span>hrtimeAccum
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hrtimeAdd">
            function <span class="apidocSignatureSpan">jsprim.</span>hrtimeAdd
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hrtimeDiff">
            function <span class="apidocSignatureSpan">jsprim.</span>hrtimeDiff
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hrtimeMicrosec">
            function <span class="apidocSignatureSpan">jsprim.</span>hrtimeMicrosec
            <span class="apidocSignatureSpan">(a)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hrtimeMillisec">
            function <span class="apidocSignatureSpan">jsprim.</span>hrtimeMillisec
            <span class="apidocSignatureSpan">(a)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hrtimeNanosec">
            function <span class="apidocSignatureSpan">jsprim.</span>hrtimeNanosec
            <span class="apidocSignatureSpan">(a)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.hrtimediff">
            function <span class="apidocSignatureSpan">jsprim.</span>hrtimediff
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.isEmpty">
            function <span class="apidocSignatureSpan">jsprim.</span>isEmpty
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.iso8601">
            function <span class="apidocSignatureSpan">jsprim.</span>iso8601
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.mergeObjects">
            function <span class="apidocSignatureSpan">jsprim.</span>mergeObjects
            <span class="apidocSignatureSpan">(provided, overrides, defaults)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.parseDateTime">
            function <span class="apidocSignatureSpan">jsprim.</span>parseDateTime
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.parseInteger">
            function <span class="apidocSignatureSpan">jsprim.</span>parseInteger
            <span class="apidocSignatureSpan">(str, uopts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.pluck">
            function <span class="apidocSignatureSpan">jsprim.</span>pluck
            <span class="apidocSignatureSpan">(obj, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.randElt">
            function <span class="apidocSignatureSpan">jsprim.</span>randElt
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.rfc1123">
            function <span class="apidocSignatureSpan">jsprim.</span>rfc1123
            <span class="apidocSignatureSpan">(date)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.startsWith">
            function <span class="apidocSignatureSpan">jsprim.</span>startsWith
            <span class="apidocSignatureSpan">(str, prefix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.validateJsonObject">
            function <span class="apidocSignatureSpan">jsprim.</span>validateJsonObject
            <span class="apidocSignatureSpan">(schema, input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jsprim.validateJsonObjectJS">
            function <span class="apidocSignatureSpan">jsprim.</span>validateJsonObjectJS
            <span class="apidocSignatureSpan">(schema, input)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jsprim" id="apidoc.module.jsprim">module jsprim</a></h1>


    <h2>
        <a href="#apidoc.element.jsprim.deepCopy" id="apidoc.element.jsprim.deepCopy">
        function <span class="apidocSignatureSpan">jsprim.</span>deepCopy
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepCopy(obj)
{
	var ret, key;
	var marker = &#x27;__deepCopy&#x27;;

	if (obj &#x26;&#x26; obj[marker])
		throw (new Error(&#x27;attempted deep copy of cyclic object&#x27;));

	if (obj &#x26;&#x26; obj.constructor == Object) {
		ret = {};
		obj[marker] = true;

		for (key in obj) {
			if (key == marker)
				continue;

			ret[key] = deepCopy(obj[key]);
		}

		delete (obj[marker]);
		return (ret);
	}

	if (obj &#x26;&#x26; obj.constructor == Array) {
		ret = [];
		obj[marker] = true;

		for (key = 0; key &#x3c; obj.length; key++)
			ret.push(deepCopy(obj[key]));

		delete (obj[marker]);
		return (ret);
	}

	<span class="apidocCodeCommentSpan">/*
	 * It must be a primitive type -- just return it.
	 */
</span>	return (obj);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.deepEqual" id="apidoc.element.jsprim.deepEqual">
        function <span class="apidocSignatureSpan">jsprim.</span>deepEqual
        <span class="apidocSignatureSpan">(obj1, obj2)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepEqual(obj1, obj2)
{
	if (typeof (obj1) != typeof (obj2))
		return (false);

	if (obj1 === null || obj2 === null || typeof (obj1) != &#x27;object&#x27;)
		return (obj1 === obj2);

	if (obj1.constructor != obj2.constructor)
		return (false);

	var k;
	for (k in obj1) {
		if (!obj2.hasOwnProperty(k))
			return (false);

		if (!deepEqual(obj1[k], obj2[k]))
			return (false);
	}

	for (k in obj2) {
		if (!obj1.hasOwnProperty(k))
			return (false);
	}

	return (true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.endsWith" id="apidoc.element.jsprim.endsWith">
        function <span class="apidocSignatureSpan">jsprim.</span>endsWith
        <span class="apidocSignatureSpan">(str, suffix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function endsWith(str, suffix)
{
	return (str.substr(
	    str.length - suffix.length, suffix.length) == suffix);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.extraProperties" id="apidoc.element.jsprim.extraProperties">
        function <span class="apidocSignatureSpan">jsprim.</span>extraProperties
        <span class="apidocSignatureSpan">(obj, allowed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function extraProperties(obj, allowed)
{
	mod_assert.ok(typeof (obj) === &#x27;object&#x27; &#x26;&#x26; obj !== null,
	    &#x27;obj argument must be a non-null object&#x27;);
	mod_assert.ok(Array.isArray(allowed),
	    &#x27;allowed argument must be an array of strings&#x27;);
	for (var i = 0; i &#x3c; allowed.length; i++) {
		mod_assert.ok(typeof (allowed[i]) === &#x27;string&#x27;,
		    &#x27;allowed argument must be an array of strings&#x27;);
	}

	return (Object.keys(obj).filter(function (key) {
		return (allowed.indexOf(key) === -1);
	}));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.flattenIter" id="apidoc.element.jsprim.flattenIter">
        function <span class="apidocSignatureSpan">jsprim.</span>flattenIter
        <span class="apidocSignatureSpan">(data, depth, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function flattenIter(data, depth, callback)
{
	doFlattenIter(data, depth, [], callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.flattenObject" id="apidoc.element.jsprim.flattenObject">
        function <span class="apidocSignatureSpan">jsprim.</span>flattenObject
        <span class="apidocSignatureSpan">(data, depth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function flattenObject(data, depth)
{
	if (depth === 0)
		return ([ data ]);

	mod_assert.ok(data !== null);
	mod_assert.equal(typeof (data), &#x27;object&#x27;);
	mod_assert.equal(typeof (depth), &#x27;number&#x27;);
	mod_assert.ok(depth &#x3e;= 0);

	var rv = [];
	var key;

	for (key in data) {
		flattenObject(data[key], depth - 1).forEach(function (p) {
			rv.push([ key ].concat(p));
		});
	}

	return (rv);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.forEachKey" id="apidoc.element.jsprim.forEachKey">
        function <span class="apidocSignatureSpan">jsprim.</span>forEachKey
        <span class="apidocSignatureSpan">(obj, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function forEachKey(obj, callback)
{
	for (var key in obj) {
		if (hasKey(obj, key)) {
			callback(key, obj[key]);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hasKey" id="apidoc.element.jsprim.hasKey">
        function <span class="apidocSignatureSpan">jsprim.</span>hasKey
        <span class="apidocSignatureSpan">(obj, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hasKey(obj, key)
{
	mod_assert.equal(typeof (key), &#x27;string&#x27;);
	return (Object.prototype.hasOwnProperty.call(obj, key));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hrtimeAccum" id="apidoc.element.jsprim.hrtimeAccum">
        function <span class="apidocSignatureSpan">jsprim.</span>hrtimeAccum
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hrtimeAccum(a, b)
{
	assertHrtime(a);
	assertHrtime(b);

	<span class="apidocCodeCommentSpan">/*
	 * Accumulate the nanosecond component.
	 */
</span>	a[1] += b[1];
	if (a[1] &#x3e;= 1e9) {
		/*
		 * The nanosecond component overflowed, so carry to the seconds
		 * field.
		 */
		a[0]++;
		a[1] -= 1e9;
	}

	/*
	 * Accumulate the seconds component.
	 */
	a[0] += b[0];

	return (a);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hrtimeAdd" id="apidoc.element.jsprim.hrtimeAdd">
        function <span class="apidocSignatureSpan">jsprim.</span>hrtimeAdd
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hrtimeAdd(a, b)
{
	assertHrtime(a);

	var rv = [ a[0], a[1] ];

	return (hrtimeAccum(rv, b));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hrtimeDiff" id="apidoc.element.jsprim.hrtimeDiff">
        function <span class="apidocSignatureSpan">jsprim.</span>hrtimeDiff
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hrtimeDiff(a, b)
{
	assertHrtime(a);
	assertHrtime(b);
	mod_assert.ok(a[0] &#x3e; b[0] || (a[0] == b[0] &#x26;&#x26; a[1] &#x3e;= b[1]),
	    &#x27;negative differences not allowed&#x27;);

	var rv = [ a[0] - b[0], 0 ];

	if (a[1] &#x3e;= b[1]) {
		rv[1] = a[1] - b[1];
	} else {
		rv[0]--;
		rv[1] = 1e9 - (b[1] - a[1]);
	}

	return (rv);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hrtimeMicrosec" id="apidoc.element.jsprim.hrtimeMicrosec">
        function <span class="apidocSignatureSpan">jsprim.</span>hrtimeMicrosec
        <span class="apidocSignatureSpan">(a)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hrtimeMicrosec(a)
{
	assertHrtime(a);

	return (Math.floor(a[0] * 1e6 + a[1] / 1e3));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hrtimeMillisec" id="apidoc.element.jsprim.hrtimeMillisec">
        function <span class="apidocSignatureSpan">jsprim.</span>hrtimeMillisec
        <span class="apidocSignatureSpan">(a)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hrtimeMillisec(a)
{
	assertHrtime(a);

	return (Math.floor(a[0] * 1e3 + a[1] / 1e6));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hrtimeNanosec" id="apidoc.element.jsprim.hrtimeNanosec">
        function <span class="apidocSignatureSpan">jsprim.</span>hrtimeNanosec
        <span class="apidocSignatureSpan">(a)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hrtimeNanosec(a)
{
	assertHrtime(a);

	return (Math.floor(a[0] * 1e9 + a[1]));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.hrtimediff" id="apidoc.element.jsprim.hrtimediff">
        function <span class="apidocSignatureSpan">jsprim.</span>hrtimediff
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hrtimeDiff(a, b)
{
	assertHrtime(a);
	assertHrtime(b);
	mod_assert.ok(a[0] &#x3e; b[0] || (a[0] == b[0] &#x26;&#x26; a[1] &#x3e;= b[1]),
	    &#x27;negative differences not allowed&#x27;);

	var rv = [ a[0] - b[0], 0 ];

	if (a[1] &#x3e;= b[1]) {
		rv[1] = a[1] - b[1];
	} else {
		rv[0]--;
		rv[1] = 1e9 - (b[1] - a[1]);
	}

	return (rv);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.isEmpty" id="apidoc.element.jsprim.isEmpty">
        function <span class="apidocSignatureSpan">jsprim.</span>isEmpty
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isEmpty(obj)
{
	var key;
	for (key in obj)
		return (false);
	return (true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.iso8601" id="apidoc.element.jsprim.iso8601">
        function <span class="apidocSignatureSpan">jsprim.</span>iso8601
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function iso8601(d)
{
	if (typeof (d) == &#x27;number&#x27;)
		d = new Date(d);
	mod_assert.ok(d.constructor === Date);
	return (mod_extsprintf.sprintf(&#x27;%4d-%02d-%02dT%02d:%02d:%02d.%03dZ&#x27;,
	    d.getUTCFullYear(), d.getUTCMonth() + 1, d.getUTCDate(),
	    d.getUTCHours(), d.getUTCMinutes(), d.getUTCSeconds(),
	    d.getUTCMilliseconds()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.mergeObjects" id="apidoc.element.jsprim.mergeObjects">
        function <span class="apidocSignatureSpan">jsprim.</span>mergeObjects
        <span class="apidocSignatureSpan">(provided, overrides, defaults)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function mergeObjects(provided, overrides, defaults)
{
	var rv, k;

	rv = {};
	if (defaults) {
		for (k in defaults)
			rv[k] = defaults[k];
	}

	if (provided) {
		for (k in provided)
			rv[k] = provided[k];
	}

	if (overrides) {
		for (k in overrides)
			rv[k] = overrides[k];
	}

	return (rv);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.parseDateTime" id="apidoc.element.jsprim.parseDateTime">
        function <span class="apidocSignatureSpan">jsprim.</span>parseDateTime
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseDateTime(str)
{
	<span class="apidocCodeCommentSpan">/*
	 * This is irritatingly implicit, but significantly more concise than
	 * alternatives.  The &#x22;+str&#x22; will convert a string containing only a
	 * number directly to a Number, or NaN for other strings.  Thus, if the
	 * conversion succeeds, we use it (this is the milliseconds-since-epoch
	 * case).  Otherwise, we pass the string directly to the Date
	 * constructor to parse.
	 */
</span>	var numeric = +str;
	if (!isNaN(numeric)) {
		return (new Date(numeric));
	} else {
		return (new Date(str));
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.parseInteger" id="apidoc.element.jsprim.parseInteger">
        function <span class="apidocSignatureSpan">jsprim.</span>parseInteger
        <span class="apidocSignatureSpan">(str, uopts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseInteger(str, uopts)
{
	mod_assert.string(str, &#x27;str&#x27;);
	mod_assert.optionalObject(uopts, &#x27;options&#x27;);

	var baseOverride = false;
	var options = PI_DEFAULTS;

	if (uopts) {
		baseOverride = hasKey(uopts, &#x27;base&#x27;);
		options = mergeObjects(options, uopts);
		mod_assert.number(options.base, &#x27;options.base&#x27;);
		mod_assert.ok(options.base &#x3e;= 2, &#x27;options.base &#x3e;= 2&#x27;);
		mod_assert.ok(options.base &#x3c;= 36, &#x27;options.base &#x3c;= 36&#x27;);
		mod_assert.bool(options.allowSign, &#x27;options.allowSign&#x27;);
		mod_assert.bool(options.allowPrefix, &#x27;options.allowPrefix&#x27;);
		mod_assert.bool(options.allowTrailing,
		    &#x27;options.allowTrailing&#x27;);
		mod_assert.bool(options.allowImprecise,
		    &#x27;options.allowImprecise&#x27;);
		mod_assert.bool(options.trimWhitespace,
		    &#x27;options.trimWhitespace&#x27;);
		mod_assert.bool(options.leadingZeroIsOctal,
		    &#x27;options.leadingZeroIsOctal&#x27;);

		if (options.leadingZeroIsOctal) {
			mod_assert.ok(!baseOverride,
			    &#x27;&#x22;base&#x22; and &#x22;leadingZeroIsOctal&#x22; are &#x27; +
			    &#x27;mutually exclusive&#x27;);
		}
	}

	var c;
	var pbase = -1;
	var base = options.base;
	var start;
	var mult = 1;
	var value = 0;
	var idx = 0;
	var len = str.length;

	<span class="apidocCodeCommentSpan">/* Trim any whitespace on the left side. */
</span>	if (options.trimWhitespace) {
		while (idx &#x3c; len &#x26;&#x26; isSpace(str.charCodeAt(idx))) {
			++idx;
		}
	}

	/* Check the number for a leading sign. */
	if (options.allowSign) {
		if (str[idx] === &#x27;-&#x27;) {
			idx += 1;
			mult = -1;
		} else if (str[idx] === &#x27;+&#x27;) {
			idx += 1;
		}
	}

	/* Parse the base-indicating prefix if there is one. */
	if (str[idx] === &#x27;0&#x27;) {
		if (options.allowPrefix) {
			pbase = prefixToBase(str.charCodeAt(idx + 1));
			if (pbase !== -1 &#x26;&#x26; (!baseOverride || pbase === base)) {
				base = pbase;
				idx += 2;
			}
		}

		if (pbase === -1 &#x26;&#x26; options.leadingZeroIsOctal) {
			base = 8;
		}
	}

	/* Parse the actual digits. */
	for (start = idx; idx &#x3c; len; ++idx) {
		c = translateDigit(str.charCodeAt(idx));
		if (c !== -1 &#x26;&#x26; c &#x3c; base) {
			value *= base;
			value += c;
		} else {
			break;
		}
	}

	/* If we didn&#x27;t parse any digits, we have an invalid number. */
	if (start === idx) {
		return (new Error(&#x27;invalid number: &#x27; + JSON.stringify(str)));
	}

	/* Trim any whitespace on the right side. */
	if (options.trimWhitespace) {
		while (idx &#x3c; len &#x26;&#x26; isSpace(str.charCodeAt(idx))) {
			++idx;
		}
	}

	/* Check for trailing characters. */
	if (idx &#x3c; len &#x26;&#x26; !options.allowTrailing) {
		return (new Error(&#x27;trailing characters after number: &#x27; +
		    JSON.stringify(str.slice(idx))));
	}

	/* If our value is 0, we return now, to avoid returning -0. */
	if (value === 0) {
		return (0);
	}

	/* Calculate our final value. */
	var result = value * mult;

	/*
	 * If the string represents a value that cannot be precisely represented
	 * by JavaScript, then we want to check that:
	 *
	 * - We never increased the value past MAX_SAFE_INTEGER
	 * - We don&#x27;t make the result negative and below MIN_SAFE_INTEGER
	 *
	 * Because we only ever increment the value during parsing, there&#x27;s no
	 * chance of moving past MAX_SAFE_INTEGER and then dropping below it
	 * again, losing precision in the process. This means that we only need
	 * to do our checks here, at the end.
	 */
	if (!options.allowImprecise &#x26;&#x26;
	    (value &#x3e; MAX_SAFE_INTEGER || result &#x3c; MIN_SAFE_INTEGER)) {
		return (new Error(&#x27;number is outside of the supported range: &#x27; +
		    JSON.stringify(str.slice(start, idx))));
	}

	return (result);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.pluck" id="apidoc.element.jsprim.pluck">
        function <span class="apidocSignatureSpan">jsprim.</span>pluck
        <span class="apidocSignatureSpan">(obj, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pluck(obj, key)
{
	mod_assert.equal(typeof (key), &#x27;string&#x27;);
	return (pluckv(obj, key));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.randElt" id="apidoc.element.jsprim.randElt">
        function <span class="apidocSignatureSpan">jsprim.</span>randElt
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function randElt(arr)
{
	mod_assert.ok(Array.isArray(arr) &#x26;&#x26; arr.length &#x3e; 0,
	    &#x27;randElt argument must be a non-empty array&#x27;);

	return (arr[Math.floor(Math.random() * arr.length)]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.rfc1123" id="apidoc.element.jsprim.rfc1123">
        function <span class="apidocSignatureSpan">jsprim.</span>rfc1123
        <span class="apidocSignatureSpan">(date)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rfc1123(date) {
	return (mod_extsprintf.sprintf(&#x27;%s, %02d %s %04d %02d:%02d:%02d GMT&#x27;,
	    RFC1123_DAYS[date.getUTCDay()], date.getUTCDate(),
	    RFC1123_MONTHS[date.getUTCMonth()], date.getUTCFullYear(),
	    date.getUTCHours(), date.getUTCMinutes(),
	    date.getUTCSeconds()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.startsWith" id="apidoc.element.jsprim.startsWith">
        function <span class="apidocSignatureSpan">jsprim.</span>startsWith
        <span class="apidocSignatureSpan">(str, prefix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function startsWith(str, prefix)
{
	return (str.substr(0, prefix.length) == prefix);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.validateJsonObject" id="apidoc.element.jsprim.validateJsonObject">
        function <span class="apidocSignatureSpan">jsprim.</span>validateJsonObject
        <span class="apidocSignatureSpan">(schema, input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function validateJsonObjectJS(schema, input)
{
	var report = mod_jsonschema.validate(input, schema);

	if (report.errors.length === 0)
		return (null);

	<span class="apidocCodeCommentSpan">/* Currently, we only do anything useful with the first error. */
</span>	var error = report.errors[0];

	/* The failed property is given by a URI with an irrelevant prefix. */
	var propname = error[&#x27;property&#x27;];
	var reason = error[&#x27;message&#x27;].toLowerCase();
	var i, j;

	/*
	 * There&#x27;s at least one case where the property error message is
	 * confusing at best.  We work around this here.
	 */
	if ((i = reason.indexOf(&#x27;the property &#x27;)) != -1 &#x26;&#x26;
	    (j = reason.indexOf(&#x27; is not defined in the schema and the &#x27; +
	    &#x27;schema does not allow additional properties&#x27;)) != -1) {
		i += &#x27;the property &#x27;.length;
		if (propname === &#x27;&#x27;)
			propname = reason.substr(i, j - i);
		else
			propname = propname + &#x27;.&#x27; + reason.substr(i, j - i);

		reason = &#x27;unsupported property&#x27;;
	}

	var rv = new mod_verror.VError(&#x27;property &#x22;%s&#x22;: %s&#x27;, propname, reason);
	rv.jsv_details = error;
	return (rv);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jsprim.validateJsonObjectJS" id="apidoc.element.jsprim.validateJsonObjectJS">
        function <span class="apidocSignatureSpan">jsprim.</span>validateJsonObjectJS
        <span class="apidocSignatureSpan">(schema, input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function validateJsonObjectJS(schema, input)
{
	var report = mod_jsonschema.validate(input, schema);

	if (report.errors.length === 0)
		return (null);

	<span class="apidocCodeCommentSpan">/* Currently, we only do anything useful with the first error. */
</span>	var error = report.errors[0];

	/* The failed property is given by a URI with an irrelevant prefix. */
	var propname = error[&#x27;property&#x27;];
	var reason = error[&#x27;message&#x27;].toLowerCase();
	var i, j;

	/*
	 * There&#x27;s at least one case where the property error message is
	 * confusing at best.  We work around this here.
	 */
	if ((i = reason.indexOf(&#x27;the property &#x27;)) != -1 &#x26;&#x26;
	    (j = reason.indexOf(&#x27; is not defined in the schema and the &#x27; +
	    &#x27;schema does not allow additional properties&#x27;)) != -1) {
		i += &#x27;the property &#x27;.length;
		if (propname === &#x27;&#x27;)
			propname = reason.substr(i, j - i);
		else
			propname = propname + &#x27;.&#x27; + reason.substr(i, j - i);

		reason = &#x27;unsupported property&#x27;;
	}

	var rv = new mod_verror.VError(&#x27;property &#x22;%s&#x22;: %s&#x27;, propname, reason);
	rv.jsv_details = error;
	return (rv);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
